{# templates/exchange_receipt.html.twig #}
<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">
		<title>Reçu d'Échange</title>
		<style>
			@page {
				size: A5 landscape;
				margin: 30px;
			}

			body {
				font-family: Arial, sans-serif;
				font-size: 14px;
				margin: 0;
				padding: 0;
			}

			/* En-tête */
			.header {
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				margin-bottom: 10px;
			}
			.header img {
				width: 128px;
				height: auto;
			}
			.company-info {
				text-align: right;
				font-size: 12px;
			}

			/* Titre centré */
			.title {
				text-align: center;
				font-size: 26px;
				font-weight: bold;
				margin: 10px 0 20px;
				text-transform: uppercase;
			}

			/* Cadres */
			.content {
				display: flex;
				gap: 0;
				height: calc(100% - 150px); /* laisser place au header + footer */
			}

			.box {
				flex: 1;
				border: 3px solid black;
				padding: 15px;
				display: flex;
				flex-direction: column;
				justify-content: space-evenly;
				font-size: 18px;
                height: 250px;
			}

			.box span {
				font-weight: bold;
			}

			/* Footer */
			.footer {
				display: flex;
                justify-content: space-between;
				margin-top: 20px;
                margin-left: 20px; 
                margin-right: 20px;
				font-size: 12px;
			}
		</style>
	</head>
	<body>

		<!-- En-tête -->
		<div class="header">
			<div class="logo">
				<img src="{{ asset('assets/img/logo.png') }}" alt="Logo">
			</div>
			<div class="company-info">
				<small>Billeterie-Change-Transaction-Commerce Général</small><br><br>
				BKO IMM. PETIT BAROU<br>
				Tél: (+223) - 66626317 - 76260611<br>
				DUBAI: (+971) - 55 426 2144
			</div>
		</div>

		<!-- Titre -->
		<div class="title">
			REÇU D'ÉCHANGE DE DEVISES
			<br>
			<small>{{ exchange.description }}</small>
		</div>


		<!-- Contenu principal -->
		<div
			class="content">
			<!-- Cadre gauche -->
			<div class="box">
				<div>Opération :
					<span>{{ exchange.agence ? exchange.type : 'Echange compte client' }}</span>
				</div>
                <div>Date :
                    <span>{{ exchange.date ? exchange.date|date('d/m/Y') : '' }}</span>
                </div>
				<div>Nom Client :
					<span>{{ exchange.client ? exchange.client.nom : exchange.vanishClientName }}</span>
				</div>
				<div>Téléphone :
					<span>{{ exchange.client ? exchange.client.phone : exchange.vanishClientTel  }}</span>
				</div>
				<div>Destination :
					<span>{{ exchange.agence ? exchange.agence.localite : '--'  }}</span>
				</div>
			</div>

			<!-- Cadre droit -->
			<div class="box">
				{% if exchange.agence %}
					<div>Montant CFA :
						<span>{{ exchange.type == "achat" ? exchange.fromAmount : exchange.toAmount }}
							{{ exchange.type == "achat" ? exchange.fromCurrency : exchange.toCurrency }}</span>
					</div>
					<div>Montant Devise :
						<span>{{ exchange.type == "achat" ? exchange.toAmount : exchange.fromAmount }}
							{{ exchange.type == "achat" ? exchange.toCurrency : exchange.fromCurrency }}</span>
					</div>
				{% else %}
					<div>Montant Vendu :
						<span>{{ exchange.fromAmount }}
							{{ exchange.fromCurrency }}</span>
					</div>
					<div>Montant Acheté :
						<span>{{ exchange.toAmount }}
							{{ exchange.toCurrency }}</span>
					</div>
				{% endif %}
				<div>Taux appliqué :
					<span>{{ exchange.taux }}</span>
				</div>
			</div>
		</div>

		<!-- Footer -->
		<div class="footer">
            <span>Signature Client</span>
            <small>Merci pour votre confiance !</small>
			<span>Délivré par : MOUSSA TIGANA</span>
            
		</div>

		<script>
			window.addEventListener('load', function() {
            setTimeout(function() {
                window.print();
                // Fermer après impression si dans un nouvel onglet
                setTimeout(function() { window.close(); }, 500);
            }, 500);
        });
		</script>
	</body>
</html>
